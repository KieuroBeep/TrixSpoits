-- AutoSetBio.lua (LocalScript -> put in StarterPlayerScripts)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")

local player = Players.LocalPlayer
local desiredBio = "Diablo Hub User!"

-- payload shapes we'll try (common patterns)
local payloads = {
    function() return desiredBio end,
    function() return {"Bio", desiredBio} end,
    function() return {"SetBio", desiredBio} end,
    function() return {"UpdateBio", desiredBio} end,
    function() return {"ProfileUpdate", desiredBio} end,
    function() return {"SetProfile", "Bio", desiredBio} end,
    function() return {"RolePlayName", desiredBio} end,        -- matches your example pattern
    function() return {"RolePlayBio", desiredBio} end,
    function() return {"1RPNam1eTex1t", desiredBio} end,
    function() return {desiredBio, true} end,
    function() return {"bio", desiredBio} end,
    function() return {"Bio", desiredBio, player.UserId} end
}

local function payloadToString(p)
    if type(p) ~= "table" then return tostring(p) end
    local parts = {}
    for i=1,#p do
        parts[#parts+1] = tostring(p[i])
    end
    return "(" .. table.concat(parts, ", ") .. ")"
end

local attempts = {}
local successes = {}

-- Try a specific remote with a payload safely
local function tryCallRemote(remote, payload)
    local ok, result
    if remote:IsA("RemoteFunction") then
        ok = pcall(function()
            if type(payload) == "table" then
                result = remote:InvokeServer(unpack(payload))
            else
                result = remote:InvokeServer(payload)
            end
        end)
    else -- RemoteEvent
        ok = pcall(function()
            if type(payload) == "table" then
                remote:FireServer(unpack(payload))
            else
                remote:FireServer(payload)
            end
        end)
    end
    return ok, result
end

-- scan ReplicatedStorage for remotes and attempt
for _, inst in ipairs(ReplicatedStorage:GetDescendants()) do
    if inst:IsA("RemoteEvent") or inst:IsA("RemoteFunction") then
        for _, makePayload in ipairs(payloads) do
            local payload = makePayload()
            -- record attempt
            attempts[#attempts+1] = {
                remote = inst:GetFullName(),
                payload = payloadToString(payload)
            }

            local ok, res = tryCallRemote(inst, payload)
            if ok then
                successes[#successes+1] = {
                    remote = inst:GetFullName(),
                    payload = payloadToString(payload),
                    result = res
                }
            end

            task.wait(0.08) -- small delay to avoid spamming too fast
        end
    end
end

-- Also try a common "RE" pattern used in your example, if present
local okRE = ReplicatedStorage:FindFirstChild("RE")
if okRE then
    local candidate = okRE:FindFirstChild("1RPNam1eTex1t") or okRE:FindFirstChild("1RPNam1eTex1t")
    if candidate and (candidate:IsA("RemoteEvent") or candidate:IsA("RemoteFunction")) then
        local ok, res = tryCallRemote(candidate, {"RolePlayName", desiredBio})
        attempts[#attempts+1] = { remote = candidate:GetFullName(), payload = "('RolePlayName', '"..desiredBio.."')" }
        if ok then successes[#successes+1] = { remote = candidate:GetFullName(), payload = "('RolePlayName', '"..desiredBio.."')", result = res } end
    end
end

-- notify player of results (SendNotification may not work in every environment; fallback to print)
local function notify(title, text)
    local success = pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = title;
            Text = text;
            Duration = 4;
        })
    end)
    if not success then
        print(title .. " - " .. text)
    end
end

if #successes > 0 then
    notify("Diablo Bio", "Tried setting bio â€” some attempts returned OK. Check console for details.")
    print("=== AutoSetBio: Successes ===")
    for i, s in ipairs(successes) do
        print(i, s.remote, s.payload, "result:", s.result)
    end
else
    notify("Diablo Bio", "Tried setting bio but no remote accepted the formats I tried.")
    print("=== AutoSetBio: No successes. Attempts: ===")
    for i, a in ipairs(attempts) do
        print(i, a.remote, a.payload)
    end
    print("If nothing worked, the game may not expose a client-facing remote that sets bio, or it requires a specific/secure server-only flow.")
end
